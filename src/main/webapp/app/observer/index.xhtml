<!--  
 * Copyright (c) 2016, Jarmo Juujärvi, Sami Kallio, Kai Korhonen, Juha Moisio, Ilari Paananen 
 * Copyright (c) 2019, Karoliina Lappalainen, Tuomas Moisio, Visa Nykänen, Petra Puumala 
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 *     1. Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *
 *     2. Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *
 *     3. Neither the name of the copyright holder nor the names of its 
 *       contributors may be used to endorse or promote products derived
 *       from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:p="http://primefaces.org/ui">
<h:body>
	<ui:composition template="/WEB-INF/template.xhtml">
		<ui:define name="pageTitle">#{msg.obs_title}</ui:define>
		<ui:define name="mainpage">
			<script type="text/javascript">
				function getMessages() {
					return {
						dialogErrorTitle: "#{msg.dialogErrorTitle}",
						countAbbreviation: "#{msg.countAbbreviation}",
						obs_errorCouldntSendStart: "#{msg.obs_errorCouldntSendStart}",
						obs_errorCouldntSendData: "#{msg.obs_errorCouldntSendData}",
						obs_errorKeepAliveFailed: "#{msg.obs_errorKeepAliveFailed}"
					};
				}
				function getCategoryTypes() {
					return Object.freeze({
						TIMED: 0,
						COUNTED: 1
					});
				}
				function getCategorySets() {
					return [
						<ui: repeat value="#{observationBean.categorySetsInUse}" var="categorySet">
							{name: "#{categorySet.name}", categories: [
							<ui: repeat value="#{categorySet.categories}" var="category">
								{name: "#{category.name}", type: #{category.getTypeAsInt()}, id: #{category.tag} },
							</ui: repeat >
							]
				},
						</ui: repeat >
						];
						
					}
			</script>
			<h:outputStylesheet library="css" name="observer.css" />
			<h:outputScript library="primefaces" name="jquery/jquery.js" />
			<h:outputScript library="js" name="observer.js" />
			<p:growl id="growl" widgetVar="growlWdgt" showDetail="true" severity="error" />
			<p:confirmDialog global="true" style="font-size: 1.1rem">
				<p:commandButton value="#{msg.dialogConfirmYes}" type="button" styleClass="ui-confirmdialog-yes"
					icon="ui-icon-check" />
				<p:commandButton value="#{msg.dialogConfirmNo}" type="button" styleClass="ui-confirmdialog-no"
					icon="ui-icon-close" />
			</p:confirmDialog>
			<div id="content" class="no-text-select">
				<div id="total-time"></div>
				<div id="controls">
					<div id="start" class="control-button"><span class="fa fa-play"></span> #{msg.obs_start}</div>
					<div id="continue" class="control-button"><span class="fa fa-play"></span> #{msg.obs_continue}</div>
					<div id="pause" class="control-button"><span class="fa fa-pause"></span> #{msg.obs_pause}</div>
					<div id="stop-disabled" class="control-button disabled"><span class="fa fa-stop"></span>
						#{msg.obs_stop}</div>
					<p:commandLink id="stop" class="control-button" onclick="stopObservation();">
						<span class="fa fa-stop"></span> #{msg.obs_stop}
					</p:commandLink>
				</div>
				<div id="category-list"></div>
			</div>
		</ui:define>
	</ui:composition>
</h:body>
</html>